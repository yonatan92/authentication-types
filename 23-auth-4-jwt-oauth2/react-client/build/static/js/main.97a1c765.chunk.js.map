{"version":3,"sources":["api.js","App.js","index.js","logo.svg"],"names":["logout","a","fetch","json","response","console","log","get_protected","token","headers","App","useState","authenticated","set_authenticated","loading","set_loading","user","set_user","content","set_content","useEffect","window","location","search","qs","parse","profile","JSON","localStorage","setItem","history","replaceState","document","title","connect","provider","href","_","api","status","removeItem","getItem","payload","className","src","logo","alt","name","photo","onClick","ReactDOM","render","StrictMode","getElementById","module","exports"],"mappings":"kSAEaA,G,MAAM,uCAAG,4BAAAC,EAAA,4DACN,mBADM,SAEYC,MADlB,oBADM,8BAEwBC,OAFxB,cAEZC,EAFY,OAGlBC,QAAQC,IAAI,CAACF,aAHK,kBAIXA,GAJW,2CAAH,sDAMNG,EAAa,uCAAG,iCAAAN,EAAA,6DAAQO,EAAR,EAAQA,MACrB,iBACNC,EAAU,CAAC,iBAAkBD,GAFV,SAGKN,MAFlB,iBAE4B,CAACO,YAHhB,8BAG2BN,OAH3B,cAGnBC,EAHmB,OAIzBC,QAAQC,IAAI,CAACF,aAJY,kBAKlBA,GALkB,4CAAH,sD,wBC8EXM,MA/Ef,WAAgB,IAAD,EAC6BC,oBAAS,GADtC,mBACNC,EADM,KACQC,EADR,OAEiBF,oBAAS,GAF1B,mBAENG,EAFM,KAEEC,EAFF,OAGWJ,mBAAS,MAHpB,mBAGNK,EAHM,KAGDC,EAHC,OAIiBN,mBAAS,qBAJ1B,mBAINO,EAJM,KAIEC,EAJF,KAMbC,qBAAU,WACR,GAAGC,OAAOC,SAASC,OAAO,CACxBlB,QAAQC,IAAI,YAAYe,OAAOC,SAASC,QACxC,IAAMA,EAASC,IAAGC,MAAMJ,OAAOC,SAASC,QACxClB,QAAQC,IAAI,QAAQiB,GACpB,IAAMG,EAAUC,KAAKF,MAAMF,EAAOG,SAC3BlB,EAASe,EAATf,MACPH,QAAQC,IAAI,aAAaoB,GACzBrB,QAAQC,IAAI,WAAWE,GACpBkB,GAAWlB,IACbK,GAAkB,GAClBI,EAASS,GAETE,aAAaC,QAAQ,QAAQrB,GAG7Ba,OAAOS,QAAQC,aAAa,GAAIC,SAASC,MAAO,SAGnD,IAEF,IAAMC,EAAU,SAAAC,GACbpB,GAAY,GACZM,OAAOC,SAASc,KAAhB,yCAAyDD,IAGtDnC,EAAM,uCAAG,WAAMqC,GAAN,SAAApC,EAAA,sEACUqC,IADV,OAEU,uBAFV,OAEDC,SACV1B,GAAkB,GAClBI,EAAS,MACTW,aAAaY,WAAW,UALb,2CAAH,sDASNjC,EAAa,uCAAG,WAAM8B,GAAN,iBAAApC,EAAA,6DACdO,EAAQoB,aAAaa,QAAQ,SADf,SAEGH,EAAkB,CAAC9B,UAFtB,OAEdJ,EAFc,OAGpBe,EAAYf,EAASsC,SAHD,2CAAH,sDAMnB,OACE,yBAAKC,UAAU,OACb,4BAAQA,UAAU,cAChB,yBAAKA,UAAU,WACb,yCACA,yBAAKC,IAAKC,IAAMF,UAAU,OAAOG,IAAI,UAGvC,4CAAiB,0BAAMH,UAAU,kBAAkB,IAAI/B,IACvD,sCAAW,0BAAM+B,UAAU,kBAAkB,IAAI7B,IACjD,yBAAK6B,UAAU,eACZ3B,GAAQ,oCACP,2BAAIA,EAAK+B,MACT,yBAAKJ,UAAU,cAAcC,IAAK5B,GAAQA,EAAKgC,MAAOF,IAAI,aAG9D,yBAAKH,UAAU,eACZ/B,EACD,4BAAQ+B,UAAU,MAAMM,QAASjD,GAAjC,UACE,6BACE,4BAAQ2C,UAAU,YAAYM,QAAS,kBAAKf,EAAQ,YAAW,kBAAC,IAAD,OAC/D,4BAAQS,UAAU,YAAYM,QAAS,kBAAKf,EAAQ,cAAa,kBAAC,IAAD,QAGrE,4BAAQS,UAAU,MAAMM,QAAS1C,GAAjC,0BAEF,uBAAGoC,UAAU,WAAWzB,MC3EhCgC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFpB,SAASqB,eAAe,U,kBCT1BC,EAAOC,QAAU,IAA0B,mC","file":"static/js/main.97a1c765.chunk.js","sourcesContent":["//http://localhost:3030\n\nexport const logout = async ()=> {\n    const url = '/api/auth/logout';\n    const response = await (await fetch(url)).json()\n    console.log({response})\n    return response;\n}\nexport const get_protected = async ({token})=> {\n    const url = '/api/protected';\n    const headers = {'x-access-token': token}\n    const response = await (await fetch(url,{headers})).json()\n    console.log({response})\n    return response;\n}","import React, { useState, useEffect } from 'react';\nimport logo from './logo.svg';\nimport './App.css';\nimport * as api from './api';\nimport {FaFacebookF,FaGithub} from 'react-icons/fa'\nimport qs from 'query-string'\n\nfunction App() {\n  const [authenticated,set_authenticated] = useState(false);\n  const [loading,set_loading] = useState(false);\n  const [user,set_user] = useState(null);\n  const [content,set_content] = useState('no content yet...');\n\n  useEffect(()=>{\n    if(window.location.search){\n      console.log('search - ',window.location.search)\n      const search = qs.parse(window.location.search);\n      console.log('qs - ',search)\n      const profile = JSON.parse(search.profile)\n      const {token} = search\n      console.log('profile - ',profile)\n      console.log('token - ',token)\n      if(profile && token){\n       set_authenticated(true)\n       set_user(profile)\n \n       localStorage.setItem('token',token)\n \n       //remove query string and path from url...\n       window.history.replaceState({}, document.title, \"/\");\n      }\n    }\n  },[])\n\n  const connect = provider =>{\n     set_loading(true)\n     window.location.href = `http://localhost:3030/api/auth/${provider}`;  \n  }\n\n  const logout = async _ =>{\n    const response = await api.logout()\n    if(response.status === 'You are logged out'){\n      set_authenticated(false)\n      set_user(null)\n      localStorage.removeItem('token')\n\n    }\n  }\n  const get_protected = async _ =>{\n    const token = localStorage.getItem('token')\n    const response = await api.get_protected({token})\n    set_content(response.payload)\n  }\n  \n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <div className=\"top-box\">\n          <h1>Auth demo</h1>\n          <img src={logo} className=\"logo\" alt=\"logo\" />\n        </div>\n        \n        <p>Authenticated:<span className=\"lightblue-text\">{' '+authenticated}</span></p>\n        <p>Loading:<span className=\"lightblue-text\">{' '+loading}</span></p>\n        <div className=\"profile-box\">\n          {user && <>\n            <p>{user.name}</p>\n            <img className=\"profile-img\" src={user && user.photo} alt=\"avatar\" />\n            </>}\n        </div>\n        <div className=\"buttons-box\">\n          {authenticated?\n          <button className=\"btn\" onClick={logout}>Logout</button>\n          : <div>\n              <button className=\"oauth-btn\" onClick={()=> connect('github')}><FaGithub/></button>\n              <button className=\"oauth-btn\" onClick={()=> connect('facebook')}><FaFacebookF/></button>\n            </div>\n          }\n          <button className=\"btn\" onClick={get_protected}>get protected content</button>\n        </div>\n        <p className=\"content\">{content}</p>\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n\n//:<button className=\"btn\" onClick={login}>Login</button>}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n","module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";"],"sourceRoot":""}